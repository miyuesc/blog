ç¬¬åå¤©
---

ç¬¬ä¸€ä¸ªæ•…äº‹ï¼šæ­å»ºç¯å¢ƒä¸ä»£ç é£æ ¼ç®¡ç†
-----------------

ä»Šå¤©çš„æ•…äº‹æ˜¯æœ¬è¯¾ç¨‹æœ€åçš„å†…å®¹ï¼Œä¸»è¦æ¥èŠèŠå‰ç«¯å¼€å‘çš„å·¥ç¨‹åŒ–ã€‚é‚£ä¹ˆä»€ä¹ˆæ˜¯å‰ç«¯å·¥ç¨‹åŒ–å‘¢ï¼Ÿå®ƒèƒ½è§£å†³ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ

æˆ‘ä»¬çŸ¥é“ï¼Œæ—©æœŸJavaScriptä»£ç æ˜¯å†™åœ¨æ–‡æœ¬ç¼–è¾‘å™¨ä¸­çš„ï¼Œç„¶ååŠ è½½åˆ°æµè§ˆå™¨ï¼Œç›´æ¥è¿è¡Œã€‚è¿™ç§æ–¹å¼å¯¹äºæ—©æœŸåªæ˜¯å¼€å‘å‡ ä¸ªé¡µé¢æ¥è¯´è¿˜æ˜¯å¾ˆä¾¿åˆ©ã€‚ä½†æ˜¯ï¼Œå¦‚ä»Šçš„å‰ç«¯å¼€å‘æ¼”å˜æˆå¤æ‚çš„åº”ç”¨å¼€å‘ï¼Œä¸€ä¸ªwebé¡¹ç›®éœ€è¦å¥½å‡ ä¸ªå¼€å‘äººå‘˜å…±åŒå®Œæˆã€‚å› ä¸ºä¸€ä¸ªé¡¹ç›®éœ€è¦å¤šäººåä½œå¼€å‘ï¼Œè¿™æ˜¯å°±ä¼šå‡ºç°å¾ˆå¤šé—®é¢˜ï¼Œæ¯”å¦‚ï¼š

-   æ¨¡å—é—´å˜é‡å†²çªã€è¦†ç›–
-   ä¹¦å†™é£æ ¼è¿¥å¼‚
-   ä»£ç é‡å¤å’Œå†—ä½™ç­‰

å‰ç«¯å·¥ç¨‹åŒ–å°±æ˜¯ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜è€Œäº§ç”Ÿçš„ã€‚å‰ç«¯å·¥ç¨‹åŒ–çš„ä¸»è¦å†…å®¹åŒ…æ‹¬äº†**æ¨¡å—åŒ–**ã€**ç»„ä»¶åŒ–**ã€**è§„èŒƒåŒ–**å’Œ**è‡ªåŠ¨åŒ–**ã€‚åœ¨å‰é¢çš„æ•…äº‹ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†å¦‚ä½•å°è£…æ¨¡å—å’Œåˆ›å»ºç»„ä»¶çš„æ€è·¯ã€‚æ‰€ä»¥ä»Šå¤©çš„æ•…äº‹ï¼Œæˆ‘ä»¬é‡ç‚¹å…³æ³¨è§„èŒƒåŒ–å’Œè‡ªåŠ¨åŒ–è¿™ä¸¤æ–¹é¢ã€‚è§„èŒƒåŒ–åŒ…æ‹¬äº†ä¹¦å†™è§„èŒƒï¼Œç‰ˆæœ¬ç»Ÿä¸€ç­‰ã€‚è‡ªåŠ¨åŒ–åŒ…æ‹¬äº†è‡ªåŠ¨æ‰“åŒ…ã€å•å…ƒæµ‹è¯•ï¼ŒæŒç»­é›†æˆç­‰ç­‰ã€‚

æ—©äº›å¹´ï¼ŒWebå¼€å‘çš„è§„èŒƒåŒ–ä¸€èˆ¬é‡‡ç”¨çº¦å®šçš„æ–¹å¼ï¼Œè§„èŒƒç¨‹åºå‘˜çš„ä»£ç ä¹¦å†™ã€‚æ¯”å¦‚ï¼Œè®©ä¸åŒçš„å¼€å‘äººå‘˜ç”¨ä¸åŒçš„åå­—ç©ºé—´æˆ–è€…ä¸åŒçš„å‰ç¼€æ¥å‘½åå„è‡ªè´Ÿè´£çš„æ¨¡å—ä¸­çš„å˜é‡å’Œå‡½æ•°ã€‚ä½†æ˜¯ï¼Œè¿™ç§æ–¹å¼ä¸èƒ½ä¿è¯æ¯ä¸ªå¼€å‘äººå‘˜éƒ½èƒ½éµå®ˆçº¦å®šï¼Œè€Œä¸”åœ¨äººå¤šçš„æ—¶å€™ï¼Œè¿™ç§æ–¹å¼ä¼šæŠŠå˜é‡å’Œå‡½æ•°çš„åå­—å˜å¾—å¾ˆå¤æ‚ï¼Œä¸åˆ©äºç†è§£å’Œç»´æŠ¤ã€‚

è‡³äºæ‰“åŒ…ï¼Œæ—©æœŸçš„JSè¯­è¨€ç‰¹æ€§ä¸æ”¯æŒæ¨¡å—åŒ–ï¼Œä¹Ÿæ²¡æœ‰ç›¸åº”çš„å·¥å…·æ¥ç®¡ç†æ¨¡å—ï¼Œå› æ­¤å¼€å‘äººå‘˜å„è‡ªå†™çš„JSæ–‡ä»¶éƒ½ä¾æ¬¡æ·»åŠ åˆ°HTMLé¡µé¢ä¸Šã€‚å½“é¡µé¢æ¯”è¾ƒå¤æ‚çš„æ—¶å€™ï¼ŒåŠ è½½çš„JSæ–‡ä»¶ä¼šæ¯”è¾ƒå¤šï¼Œå¯èƒ½é€ æˆæ··ä¹±ã€‚å†åæ¥ï¼Œå‡ºç°äº†require JSã€sea JSç­‰å‰ç«¯æ¨¡å—ç®¡ç†çš„å·¥å…·å’Œç›¸åº”çš„ADM/CMDè§„èŒƒï¼Œå‰ç«¯å¼€å§‹åœ¨ç½‘é¡µä¸Šé€šè¿‡å¼‚æ­¥åŠ è½½çš„æ–¹å¼æ¥ç®¡ç†å’Œç»„ç»‡JSæ–‡ä»¶ï¼Œè¿™æ˜¯æœ€åŸå§‹çš„æ¨¡å—ç®¡ç†æ–¹å¼ã€‚

ä½†åœ¨2009å¹´Node.jsè¯ç”Ÿåï¼Œå‰ç«¯ç¨‹åºå‘˜çœŸæ­£æœ‰äº†å¯ä»¥æ­å»ºé¡¹ç›®å·¥ç¨‹è„šæ‰‹æ¶å’Œç®¡ç†ä»£ç çš„ç¯å¢ƒã€‚ç”¨Node.jsç¼–å†™çš„è¿è¡Œäºå¼€å‘ç¯å¢ƒä»£ç ç›®å½•ä¸­çš„å·¥å…·è„šæœ¬ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬å®Œæˆè¯¸å¦‚ä»£ç æ£€æŸ¥ã€æ–‡ä»¶ç¼–è¯‘ã€ä¾èµ–ç®¡ç†ã€å†…å®¹æ‰“åŒ…ã€å•å…ƒæµ‹è¯•å’ŒæŒç»­é›†æˆç­‰å·¥ä½œï¼Œè¿™å°±è®©å‰ç«¯é¡¹ç›®çš„ä»£ç å¯ç»´æŠ¤æ€§å¤§å¤§æå‡ï¼Œä»è€Œèƒ½å¤Ÿè½»æ¾ç»´æŠ¤æ›´å¤§è§„æ¨¡çš„é¡¹ç›®ã€‚

æ‰€ä»¥ï¼Œç°åœ¨çš„Webé¡¹ç›®ä¸€èˆ¬ä¸å†ä½¿ç”¨â€œè£¸å†™â€JavaScriptä»£ç çš„æ–¹å¼ï¼Œè€Œæ˜¯ä¼šå…ˆå¼•å…¥å¹¶åˆå§‹åŒ–Nodeç¯å¢ƒã€‚æ‰€ä»¥ç¬¬ä¸€ä¸ªæ•…äº‹ï¼Œæˆ‘ä»¬å°±æ¥çœ‹çœ‹Nodeç¯å¢ƒæ˜¯å¦‚ä½•å¸®åŠ©æˆ‘ä»¬å®ç°è§„èŒƒåŒ–ä»£ç ä¹¦å†™çš„ã€‚

ä¸‹é¢çš„å†…å®¹æ¶‰åŠåˆ°[Node.js](https://link.juejin.cn/?target=https%3A%2F%2Fnodejs.org%2F "https://nodejs.org/")å’Œ[NPM](https://link.juejin.cn/?target=https%3A%2F%2Fwww.npmjs.com%2F "https://www.npmjs.com/")çš„ä½¿ç”¨ï¼Œå¦‚æœä½ ä¸äº†è§£Node.jså’ŒNPMå¯ä»¥æŸ¥é˜…å®ƒä»¬çš„å®˜ç½‘ã€‚

é¦–å…ˆï¼Œåœ¨ç³»ç»Ÿé‡Œå®‰è£…å¥½Node.jså’ŒNPMåï¼Œåˆ›å»ºé¡¹ç›®ç›®å½•ï¼Œåœ¨ç›®å½•ä¸‹æ‰§è¡Œåˆå§‹åŒ–NPMé…ç½®æ–‡ä»¶çš„å‘½ä»¤ï¼š

```
npm init
```

ç³»ç»Ÿå°†ä¼šä»¥è¯¢é—®å¼çš„æ–¹å¼åˆ›å»ºå¹¶åˆå§‹åŒ–NPMé…ç½®ã€‚è¿™ä¸ªé…ç½®ä¼šä¿å­˜åœ¨package.jsonæ–‡ä»¶ä¸­ã€‚é€šå¸¸ä¸€ä¸ªåˆå§‹çš„NPMé…ç½®å¦‚ä¸‹ï¼š

```
{
  "name": "app",
  "version": "1.0.0",
  "description": "My Web Application",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "MIT"
}
```

è¿™æ˜¯ä¸€ä»½JSONé…ç½®æ–‡ä»¶ï¼Œ`name`å­—æ®µè¡¨ç¤ºé¡¹ç›®åç§°ï¼Œå¦‚æœä½ è¦å°†é¡¹ç›®æœ€ç»ˆå‘å¸ƒåˆ°NPMï¼Œä½ éœ€è¦èµ·ä¸€ä¸ªå”¯ä¸€çš„ï¼Œæ²¡æœ‰è¢«äººä½¿ç”¨è¿‡çš„åå­—ã€‚

`version`å­—æ®µæ˜¯é¡¹ç›®çš„ç‰ˆæœ¬å·ï¼Œä¸€èˆ¬æ¥è¯´é‡‡ç”¨`semver`ï¼ˆè¯­ä¹‰åŒ–ç‰ˆæœ¬ Semantic Versioningï¼‰è§„èŒƒï¼Œæ ¹æ®`semver`è§„èŒƒï¼Œç‰ˆæœ¬å·æ ¼å¼ä¸ºï¼š`ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·`ã€‚å½“é¡¹ç›®åšäº†ä¸å…¼å®¹çš„APIä¿®æ”¹æ—¶ï¼Œæ›´æ–°ä¸»ç‰ˆæœ¬å·ï¼›åšäº†å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ›´æ–°æ—¶ï¼Œæ›´æ–°æ¬¡ç‰ˆæœ¬å·ï¼Œåªæ˜¯åšäº†é—®é¢˜ä¿®å¤æ—¶ï¼Œæ›´æ–°ä¿®è®¢å·ã€‚`description`å­—æ®µæ˜¯é¡¹ç›®æè¿°ã€‚

`main`å­—æ®µæ˜¯é¡¹ç›®çš„å…¥å£JSï¼Œå¦‚æœé¡¹ç›®è¦è¢«å…¶ä»–é¡¹ç›®ä¾èµ–ï¼Œå…¶ä»–é¡¹ç›®çš„ä»£ç ä¸­`import`æˆ–è€…`require`æ—¶ï¼Œç¼ºçœçš„å…¥å£å°±æ˜¯mainå­—æ®µæŒ‡å®šçš„é‚£ä¸ªJSæ–‡ä»¶ã€‚

`scripts`å­—æ®µæ˜¯ä¸ªå¾ˆé‡è¦çš„å­—æ®µï¼Œæˆ‘ä»¬çš„å·¥ç¨‹åŒ–è„šæœ¬å°±æ·»åŠ åœ¨è¿™é‡Œï¼Œè€Œä¸”å®ƒè¿˜æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„ä½œç”¨ï¼Œå¦‚æœæˆ‘ä»¬å®‰è£…ä¸€ä¸ªå¸¦æœ‰å‘½ä»¤è¡Œçš„Nodeæ¨¡å—ï¼Œæˆ‘ä»¬ä¸éœ€è¦å°†è¯¥æ¨¡å—å…¨å±€å®‰è£…ï¼Œ`scripts`ä¸­å®šä¹‰çš„è„šæœ¬ä¼šè‡ªåŠ¨æ ¹æ®`node_modules`æ‰¾åˆ°ç›¸åº”çš„æ¨¡å—å¹¶å¯åŠ¨è„šæœ¬æŒ‡ä»¤ã€‚

`keywords`å®šä¹‰æ¨¡å—çš„å…³é”®å­—ï¼Œå¦‚æœæˆ‘ä»¬æœ€ç»ˆå°†è¿™ä¸ªæ¨¡å—å‘å¸ƒåˆ°NPMä¸Šï¼Œè¿™é‡Œå®šä¹‰çš„`keywords`æœ‰åŠ©äºå…¶ä»–å¼€å‘è€…æœç´¢åˆ°æ¨¡å—ã€‚

`author`å­—æ®µè®¾ç½®ä½œè€…ä¿¡æ¯ã€‚`lincense`è®¾ç½®å¼€æºåè®®ã€‚

_å…³äºè¿™ä»½é…ç½®æ–‡ä»¶çš„è¯´æ˜è¿˜æœ‰å¾ˆå¤šï¼Œå¦‚æœä½ æœ‰å…´è¶£å¯ä»¥åˆ°å®˜ç½‘ä¸ŠæŸ¥çœ‹å®ƒçš„è¯¦ç»†è¯´æ˜ã€‚è¿™é‡Œæˆ‘ä»¬ä¸»è¦ä»‹ç»è¿™ä¸€èŠ‚éœ€è¦ç”¨åˆ°çš„é…ç½®ã€‚_

æˆ‘ä»¬åˆå§‹åŒ–å¥½NPMé…ç½®ä¹‹åï¼Œå°±å¯ä»¥å®‰è£…æ¨¡å—äº†ã€‚

åœ¨å¤šäººç»´æŠ¤çš„é¡¹ç›®ä¸­ï¼Œç¬¬ä¸€ä¸ªè¦åšçš„äº‹æƒ…æ˜¯ç»Ÿä¸€ä»£ç é£æ ¼ï¼ŒåŒ…æ‹¬ç¬¦å·ä¹¦å†™é£æ ¼å¦‚ç¼©è¿›ã€æ‹¬å·ã€è¿ç®—ç¬¦ã€ç©ºæ ¼ã€ç©ºè¡Œã€å¼•å·ã€é€—å·ã€åˆ†å·ç­‰ç­‰ï¼›ä¹ŸåŒ…æ‹¬è¯­æ³•ä¹¦å†™é£æ ¼ï¼Œå¦‚å˜é‡å‘½åã€é€»è¾‘ç»“æ„ã€å‡½æ•°ç­¾åç­‰ç­‰ï¼›ä»¥åŠå…¶ä»–ä¸€äº›é£æ ¼ï¼Œæ¯”å¦‚å‡½æ•°å‚æ•°ä¸ªæ•°ã€ä¸€è¡Œä¹¦å†™çš„æœ€å¤§å­—ç¬¦æ•°ã€å‡½æ•°é•¿åº¦ä¸é€»è¾‘å¤æ‚åº¦ã€å•ä¸ªJSæ–‡ä»¶é•¿åº¦ç­‰ç­‰ã€‚

è¿™äº›ä»£ç é£æ ¼æ£€æŸ¥ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥é€šè¿‡å·¥å…·`eslint`æ¥å®Œæˆã€‚æ‰€ä»¥ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦ç»™Nodeç¯å¢ƒå®‰è£…`eslint`åŒ…ï¼š

```
npm install --save-dev eslint
```

ä¸Šé¢çš„å‘½ä»¤è¡Œä¸­ï¼Œæˆ‘ä»¬é€šè¿‡`npm install`å®‰è£…`eslint`ï¼Œå‚æ•°`--save-dev`è¡¨ç¤ºå°†å®ƒå®‰è£…åˆ°å¼€å‘ä¾èµ–ä¸­ã€‚å®‰è£…å®Œæˆåï¼Œ`package.json`ä¸­å¢åŠ äº†`devDependencies`å­—æ®µï¼Œå…¶ä¸­å†…å®¹æ˜¯å½“å‰å®‰è£…çš„`eslint`çš„ç‰ˆæœ¬å·ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š

```
{
  "name": "app",
  "version": "1.0.0",
  "description": "My Web Application",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "MIT",
  "devDependencies": {
    "eslint": "^6.8.0"
  }
}
```

å®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬éœ€è¦å‘Šè¯‰`eslint`æ£€æŸ¥å“ªäº›æ–‡ä»¶ï¼š

```
{
  "name": "app",
  "version": "1.0.0",
  "description": "My Web Application",
  "main": "index.js",
  "scripts": {
    "lint": "eslint './**/*.js'",
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "MIT",
  "devDependencies": {
    "eslint": "^6.8.0"
  }
}
```

å¦‚ä¸Šä»£ç æ‰€ç¤ºï¼Œæˆ‘ä»¬ç»™`script`å­—æ®µæ·»åŠ äº†`"lint": "eslint './**/*.js'"`è¿™ä¸ªé…ç½®ï¼Œè¡¨ç¤ºè®©`eslint`æ£€æŸ¥é¡¹ç›®ä¸­æ‰€æœ‰çš„JSæ–‡ä»¶ã€‚

ä½†æ˜¯ï¼Œ`eslint`æ²¡æœ‰è®¾ç½®é»˜è®¤çš„æ£€æŸ¥è§„åˆ™ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»ç»™å®ƒæŒ‡å®šæ£€æŸ¥è§„åˆ™ã€‚æˆ‘ä»¬åœ¨é¡¹ç›®ç›®å½•ä¸‹æ·»åŠ ä¸€ä¸ª`.eslintrc.js`æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š

```
module.exports = {
  extends: 'eslint:recommended',
};
```

`eslint:recommended`æ˜¯`eslint`å†…ç½®çš„æ¨èæ£€æŸ¥è§„åˆ™ï¼Œæˆ‘ä»¬æš‚æ—¶å°±ç”¨å®ƒæ¥è§„èŒƒå¼€å‘äººå‘˜çš„ä»£ç ä¹¦å†™ã€‚

ç°åœ¨æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­åˆ›å»ºä¸€ä¸ªJSæ–‡ä»¶`index.js`ï¼Œå†…å®¹å¦‚ä¸‹ï¼š

```
var message = "Hello world!";
console.log(message);
```

ç„¶åæˆ‘ä»¬åœ¨é¡¹ç›®ç›®å½•ä¸‹è¿è¡Œå‘½ä»¤ï¼Œæ£€æŸ¥é¡¹ç›®ä¸‹æ‰€æœ‰JSæ–‡ä»¶çš„ä¹¦å†™è§„èŒƒï¼š

```
npm run lint 
```

è¿™æ—¶ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°æ§åˆ¶å°ä¸Šè¾“å‡ºçš„æ£€æŸ¥ç»“æœï¼š

```
  2:1  error  'console' is not defined  no-undef

âœ– 1 problem (1 error, 0 warnings)
```

è¿™æ¡ç»“æœè¯´çš„æ˜¯`console`å˜é‡æœªå®šä¹‰ï¼Œä½†æ˜¯`console`æ˜¯åœ¨æµè§ˆå™¨ç¯å¢ƒä¸‹çš„å†…ç½®å¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨`.eslintrc.js`é…ç½®é‡Œé¢ä¿®æ”¹ä¸€ä¸‹ï¼š

```
module.exports = {
  env: {
    browser: true, // å‘Šè¯‰eslintè¿™ä¸ªé¡¹ç›®æ˜¯æµè§ˆå™¨çš„é¡¹ç›®
  },
  extends: 'eslint:recommended',
};
```

å› ä¸ºæˆ‘ä»¬çš„é¡¹ç›®æ˜¯ä¸€ä¸ªæµè§ˆå™¨åº”ç”¨ï¼Œæˆ‘ä»¬æŠŠ`env`ï¼ˆç¯å¢ƒï¼‰é…ç½®ä¸º`{browser: true}`ï¼Œè¿™æ ·æµè§ˆå™¨ä¸‹çš„å†…ç½®å¯¹è±¡å°±ä¸ä¼šæŠ¥æœªå®šä¹‰çš„é”™è¯¯äº†ã€‚

`eslint`è¿˜å…è®¸æˆ‘ä»¬æ·»åŠ å…¶ä»–è§„åˆ™ï¼Œæ¯”å¦‚æˆ‘ä»¬å¸Œæœ›ä¸ä½¿ç”¨`var`ï¼Œè€Œä½¿ç”¨ES6çš„`const`å’Œ`let`å£°æ˜ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æ·»åŠ è§„åˆ™â€”â€”rulesï¼š

```
module.exports = {
  env: {
    browser: true,
  },
  extends: 'eslint:recommended',
  rules: {
    "no-var": "error",
  },
};
```

æˆ‘ä»¬å†æ¬¡è¿è¡Œ`npm run lint`ï¼Œå°±å¯ä»¥çœ‹åˆ°æ–°çš„é”™è¯¯ä¿¡æ¯ï¼š

```
  1:1  error  Unexpected var, use let or const instead  no-var

âœ– 1 problem (1 error, 0 warnings)
```

æ­¤æ—¶æˆ‘ä»¬æŠŠ`var`æ”¹ä¸º`const`ï¼š

```
const message = "Hello world!";
console.log(message);
```

å†æ¬¡è¿è¡Œè„šæœ¬ï¼Œä¾ç„¶æŠ¥ä¸€ä¸ªé”™è¯¯ï¼š

```
  1:1  error  Parsing error: The keyword 'const' is reserved

âœ– 1 problem (1 error, 0 warnings)
```

è¿™æ˜¯å› ä¸º`eslint`é»˜è®¤çš„JSç‰ˆæœ¬æ˜¯ES5ï¼Œæ‰€ä»¥ä¸æ”¯æŒ`const`è¯­æ³•ï¼Œéœ€è¦å°†é»˜è®¤çš„JSç‰ˆæœ¬ä¿®æ”¹ä¸ºES6ç‰ˆæœ¬ï¼š

```
module.exports = {
  env: {
    browser: true,
  },
  extends: 'eslint:recommended',
  parserOptions: {
    ecmaVersion: 2017,
    sourceType: 'module',
  },
  rules: {
    "no-var": "error",
  },
};
```

ä¸Šé¢çš„ä»£ç è®¾ç½®äº†`parserOptions`å±æ€§ï¼Œå°†`ecmaVersion`è®¾ä¸º`2017`ï¼Œ`sourceType`è®¾ä¸º`module`è¿™æ ·å®ƒå°±æ”¯æŒ`ES2017`æœ€æ–°çš„è¯­æ³•å’Œ`ES module`æ¨¡å—åŠ è½½è¯­æ³•çš„æ£€æŸ¥äº†ã€‚

å…¶å®ï¼ŒESLintçš„æ ¡éªŒè§„åˆ™å¾ˆå¤šï¼Œæœ‰æ•°ç™¾æ¡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨[ESLintå®˜ç½‘](https://link.juejin.cn/?target=https%3A%2F%2Fcn.eslint.org%2Fdocs%2Frules%2F "https://cn.eslint.org/docs/rules/")ä¸ŠæŸ¥åˆ°æ‰€æœ‰çš„è§„åˆ™è¯´æ˜å’Œé…ç½®æ–¹æ³•ï¼Œç„¶åæ ¹æ®æˆ‘ä»¬çš„å–œå¥½æ¥é…ç½®ï¼Œä½†è¿™æ˜¯ä¸€ä»¶éå¸¸è€—æ—¶çš„å·¥ä½œã€‚ä¸è¿‡ï¼ŒESLintæä¾›äº†äº¤äº’å¼åˆå§‹åŒ–æ ¡éªŒè§„åˆ™çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒæ¥å¿«é€Ÿé…ç½®è§„åˆ™ã€‚

### è‡ªåŠ¨é…ç½® eslint

ç¼–è¾‘`package.json`ï¼Œæ·»åŠ `scripts`å­—æ®µçš„å†…å®¹ï¼š

```
{
  "name": "app",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "lint:init": "eslint --init",
    "lint": "eslint './**/*.js'",
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "devDependencies": {
    "eslint": "^6.8.0"
  }
}
```

æˆ‘ä»¬æ·»åŠ ä¸€ä¸ª`lint:init`å‘½ä»¤è¡Œè„šæœ¬ï¼Œç„¶åè¿è¡Œå®ƒï¼š

```
npm run lint:init
```

è¿™æ ·ESLintå°±ä¼šå¯åŠ¨äº¤äº’å¼é…ç½®çš„å‘½ä»¤å¸®åŠ©æˆ‘ä»¬é…ç½®åˆé€‚äºæˆ‘ä»¬é¡¹ç›®çš„ESLintæ£€æŸ¥è§„åˆ™ã€‚

```
> eslint --init

? How would you like to use ESLint? To check syntax, find problems, and enforce 
code style
? What type of modules does your project use? JavaScript modules (import/export)


? Which framework does your project use? None of these
? Does your project use TypeScript? No
? Where does your code run? Browser, Node
? How would you like to define a style for your project? Use a popular style gui
de
? Which style guide do you want to follow? Airbnb: https://github.com/airbnb/jav
ascript
? What format do you want your config file to be in? JavaScript
```

æ‰§è¡Œ`eslint --init`ä¼šè¯¢é—®æˆ‘ä»¬å‡ ä¸ªé—®é¢˜ï¼Œæ ¹æ®æˆ‘ä»¬çš„å›ç­”åˆå§‹åŒ–é…ç½®æ–‡ä»¶ï¼Œè€Œä¸”ä¼šè®©æˆ‘ä»¬é€‰æ‹©ç»§æ‰¿å¸¸ç”¨çš„ä»£ç é£æ ¼ï¼ŒåŒ…æ‹¬[Airbnb](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fdoasync%2Feslint-config-airbnb-standard "https://github.com/doasync/eslint-config-airbnb-standard")é£æ ¼ã€[Standard](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fstandard%2Feslint-config-standard "https://github.com/standard/eslint-config-standard")å’Œ[Google](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fgoogle%2Feslint-config-google "https://github.com/google/eslint-config-google")é£æ ¼ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©é€‚åˆæˆ‘ä»¬å›¢é˜Ÿçš„é£æ ¼ã€‚æ¯”å¦‚é€‰æ‹©Standardé£æ ¼ï¼Œæœ€ç»ˆç”Ÿæˆçš„`.eslintrc.js`é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š

```
module.exports = {
  env: {
    browser: true,
    es6: true
  },
  extends: [
    'standard'
  ],
  globals: {
    Atomics: 'readonly',
    SharedArrayBuffer: 'readonly'
  },
  parserOptions: {
    ecmaVersion: 2018,
    sourceType: 'module'
  },
  rules: {
  }
}
```

è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ESLintè®©å›¢é˜Ÿæˆå‘˜ç»´æŠ¤é¡¹ç›®ä»£ç æ—¶ï¼Œé£æ ¼ä¿æŒä¸€è‡´äº†ã€‚

æˆ‘ä»¬æ·»åŠ äº†æ–°çš„Standardé£æ ¼ï¼Œå†æ¬¡è¿è¡Œ`npm run lint`ï¼Œå‘ç°è¿™æ¬¡æŠ¥äº†æ¯”è¾ƒå¤šçš„é”™è¯¯ï¼š

```
  1:5   error  'message' is never reassigned. Use 'const' instead  prefer-const
  1:15  error  Strings must use singlequote                        quotes
  1:29  error  Extra semicolon                                     semi
  2:21  error  Extra semicolon                                     semi
  2:22  error  Newline required at end of file but not found 
```

ESLintæŠ¥çš„é”™è¯¯ä¸€å…±5æ¡ï¼š

-   `message`å˜é‡æ²¡æœ‰è¢«å†æ¬¡èµ‹å€¼ï¼Œåº”å½“ä½¿ç”¨`const`å£°æ˜ã€‚
-   å­—ç¬¦ä¸²åº”è¯¥ç”¨å•å¼•å·
-   ä¸¤æ¡è¯­å¥å¤šä½™åˆ†å·ï¼ˆStandardé‡‡ç”¨semilessé£æ ¼ï¼Œä¸ä¸»åŠ¨å†™åˆ†å·ï¼‰ã€‚
-   æ–‡ä»¶æœ€åä¿ç•™ä¸€ä¸ªç©ºè¡Œ

æˆ‘ä»¬å¯ä»¥æ ¹æ®æç¤ºä¿¡æ¯ä¸€ä¸€ä¿®å¤å®ƒä»¬ï¼Œä½†æ˜¯æˆ‘ä»¬æœ‰ä¸€ä¸ªæ›´ç®€å•çš„æ–¹æ³•ï¼Œåœ¨`script`å­—æ®µä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š

```
  "lint:fix": "eslint './**/*.js' --fix",
```

å®ƒè¡¨ç¤ºè®©ESLintè‡ªåŠ¨ä¿®å¤é—®é¢˜ã€‚ç„¶åï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨å‘½ä»¤åè¿è¡Œ`npm run lint:fix`ï¼Œå°±èƒ½è‡ªåŠ¨ä¿®æ”¹ä¹¦å†™ä¸­çš„é”™è¯¯äº†ã€‚

æœ€åï¼Œæˆ‘ä»¬çš„ä»£ç è¢«ä¿®å¤ä¸ºï¼š

```
const message = 'Hello world!'
console.log(message)

```

æˆ‘ä»¬ä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦ï¼Œåœ¨`.eslintrc.js`çš„`rules`å­—æ®µä¸­ä¿®æ”¹æˆ‘ä»¬è‡ªå·±å–œå¥½çš„è§„åˆ™ï¼Œè¿™äº›è§„åˆ™ä¼šè¦†ç›–`standard`å®šä¹‰å¥½çš„é»˜è®¤è§„åˆ™ã€‚æ¯”å¦‚ï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ›åœ¨è¯­å¥æœ«å°¾æ·»åŠ åˆ†å·ï¼Œå¯ä»¥åœ¨`.eslintrc.js`æ–‡ä»¶ä¸­æ·»åŠ è¿™ä¸ªè§„åˆ™ï¼š

```
rules: {
  semi: ['error', 'always'],
}
```

è¿™æ ·æˆ‘ä»¬å†æ‰§è¡Œ`npm run lint`æ—¶ï¼Œåˆä¼šå‡ºç°ä¸‹é¢è¿™ä¸ªé”™è¯¯ï¼š

```
  1:31  error  Missing semicolon  semi
  2:21  error  Missing semicolon  semi

âœ– 2 problems (2 errors, 0 warnings)
```

æˆ‘ä»¬å¯ä»¥å†æ¬¡è¿è¡Œ`npm run lint:fix`æ¥ä¿®å¤å®ƒä»¬ã€‚æœ€ç»ˆä»£ç è¢«ä¿®æ”¹å¦‚ä¸‹ï¼š

```
const message = 'Hello world!';
console.log(message);

```

é™¤äº†NPMå‘½ä»¤å¤–ï¼ŒESLintè¿˜èƒ½è¢«VSCodeç­‰å¸¸ç”¨ç¼–è¾‘å™¨æ”¯æŒï¼Œè¿™äº›ç¼–è¾‘å™¨èƒ½å¤Ÿç›´æ¥åœ¨å¼€å‘çš„æ—¶å€™ç»™å‡ºè¯­æ³•æç¤ºï¼Œè¿™æ ·å°±å¸®åŠ©æˆ‘ä»¬å†™å‡ºç¬¦åˆè§„èŒƒçš„ä»£ç æ¥ã€‚

æ‰€ä»¥ï¼Œåœ¨å›¢é˜Ÿå¼€å‘çš„æ—¶å€™ï¼Œåº”å½“å…»æˆä½¿ç”¨ESLintçš„ä¹ æƒ¯ï¼Œåˆ›å»ºé¡¹ç›®åï¼Œç¬¬ä¸€ä¸ªå®‰è£…å’Œåˆå§‹åŒ–çš„æ¨¡å—å°±åº”å½“æ˜¯`eslint`ã€‚

è¿™ä¸ªæ•…äº‹ä¸»è¦è®©ä½ äº†è§£äº†å¦‚ä½•åœ¨å·¥å…·å±‚é¢è§„èŒƒå¼€å‘è€…çš„ä»£ç ä¹¦å†™ï¼Œä¸‹ä¸€ä¸ªæ•…äº‹ï¼Œæˆ‘ä»¬æ¥èŠèŠè§„èŒƒåŒ–çš„å¦ä¸€ä¸ªå†…å®¹ï¼šç»Ÿä¸€å¼€å‘ç‰ˆæœ¬ã€‚

ç¬¬äºŒä¸ªæ•…äº‹ï¼šä½¿ç”¨Babelå‘ä¸‹å…¼å®¹
-----------------

JavaScriptå¤§éƒ¨åˆ†çš„ä½¿ç”¨åœºæ™¯æ˜¯åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ã€‚å› ä¸ºWebçš„å¼€æ”¾æ€§ï¼Œç”¨æˆ·ä½¿ç”¨çš„æµè§ˆå™¨ç‰ˆæœ¬ä¹Ÿå¾ˆå¤šç§ã€‚æœ€æ–°çš„æµè§ˆå™¨å‡ ä¹æ”¯æŒæ‰€æœ‰æœ€æ–°çš„JavaScriptè¯­è¨€ç‰¹æ€§ï¼Œè€Œä¸€äº›æ¯”è¾ƒæ—§çš„æµè§ˆå™¨ï¼Œåˆ™å¯èƒ½åªæ”¯æŒæ¯”è¾ƒæ—§ç‰ˆæœ¬çš„JavaScriptè¯­è¨€ç‰¹æ€§ã€‚åœ¨è¿‡å»ï¼Œå‰ç«¯å¼€å‘è€…é¢ä¸´ä¸¤éš¾é€‰æ‹©ï¼Œè¦ä¹ˆæ”¾å¼ƒä½¿ç”¨æ–°çš„è¯­è¨€ç‰¹æ€§ä¹¦å†™ä»£ç ï¼Œè¦ä¹ˆæ”¾å¼ƒæ”¯æŒä¸€éƒ¨åˆ†ä½¿ç”¨æ—§æµè§ˆå™¨çš„ç”¨æˆ·ã€‚ä½†æ˜¯ç°åœ¨ï¼Œæœ‰äº†Babelè¿™æ ·çš„ç¼–è¯‘å·¥å…·ï¼Œæƒ…å†µå¾—åˆ°äº†æ”¹å˜ã€‚

Babelæ˜¯ä¸€ä¸ªJavaScriptç¼–è¯‘å™¨ï¼Œå®ƒèƒ½æŠŠæ–°çš„JavaScriptè¯­è¨€ç‰ˆæœ¬ç¼–è¯‘ä¸ºæ—§ç‰ˆæœ¬ï¼Œè¿™æ ·æˆ‘ä»¬å¼€å‘è€…åœ¨è¿›è¡ŒWebå¼€å‘çš„æ—¶å€™ï¼Œå°±å¯ä»¥ä½¿ç”¨æœ€æ–°çš„è¯­æ³•ç‰¹æ€§ï¼ŒåŒæ—¶åˆèƒ½å…¼é¡¾ä½¿ç”¨è€ç‰ˆæœ¬æµè§ˆå™¨ç¯å¢ƒçš„ç”¨æˆ·äº†ã€‚è¿™æ ·å°±èƒ½ä¿è¯ä¸€ä¸ªå…¬å¸å†…éƒ¨ä¸­çš„æ¯ä¸ªé¡¹ç›®ä¸­ä½¿ç”¨çš„JSç‰ˆæœ¬æ˜¯ä¸€æ ·çš„ï¼Œé™ä½å„é¡¹ç›®çš„ç»´æŠ¤æˆæœ¬ã€‚

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8267b59bdb4b4d529c33e837f669a9c1~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp)

å¦‚ä¸Šå›¾ï¼Œå·¦è¾¹æ˜¯ç¼–è¯‘å‰çš„ä»£ç ï¼Œå³è¾¹æ˜¯ç¼–è¯‘åçš„ä»£ç ï¼ˆç¼–è¯‘çš„ç›®æ ‡ç‰ˆæœ¬æ˜¯ES5ï¼‰ã€‚

ä¸‹é¢ï¼Œæˆ‘ä»¬å°±æ¥å­¦ä¹ ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨Babelå·¥å…·ã€‚

### å®‰è£…Babel

Babelæ˜¯NPMæ¨¡å—ï¼Œå®‰è£…Babelé€šå¸¸éœ€è¦è£…å¥½å‡ ä¸ªåº“ã€‚

æˆ‘ä»¬æŒ‰ç…§ä¸‹é¢çš„NPMå‘½ä»¤æ¥å®‰è£…ï¼š

```
npm install --save-dev @babel/core @babel/cli @babel/preset-env
```

`@babel/core`æ˜¯Babelçš„æ ¸å¿ƒåº“ï¼Œ`@babel/cli`æ˜¯Babelçš„å‘½ä»¤è¡Œå·¥å…·ï¼Œ`@babel/preset-env`æ˜¯Babelé»˜è®¤çš„é¢„è®¾ç¯å¢ƒã€‚

è¦åœ¨è¿è¡Œæ—¶å…¼å®¹è€ç‰ˆæœ¬çš„æµè§ˆå™¨ï¼Œæˆ‘ä»¬è¿˜è¦å®‰è£…ä¸€ä¸ª`core-js v3`æ¨¡å—ï¼Œè¿™ä¸ªæ¨¡å—è¦å®‰è£…åœ¨å‘å¸ƒä¾èµ–ï¼Œè€Œä¸æ˜¯å¼€å‘ä¾èµ–ä¸‹ã€‚

```
npm install --save core-js@3
```

ğŸ’¡`npm install`å‘½ä»¤çš„å‚æ•°`--save-dev`è¡¨ç¤ºåœ¨å®‰è£…æ¨¡å—çš„åŒæ—¶å°†æ¨¡å—ä¿¡æ¯å†™åˆ°`package.json`çš„`devDependencies`å­—æ®µï¼Œè€Œ`--save`å‚æ•°åˆ™è¡¨ç¤ºå†™åˆ°`dependencies`å­—æ®µã€‚ä¸¤è€…çš„åŒºåˆ«æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬å°†ä»£ç å‘å¸ƒåˆ°NPMï¼Œç”¨æˆ·é€šè¿‡`npm install <åŒ…å>`å®‰è£…æˆ‘ä»¬çš„ä»£ç æ—¶ï¼Œ`devDependencies`å­—æ®µä¸­çš„æ¨¡å—å¹¶ä¸ä¼šè¢«å®‰è£…ï¼Œåªæœ‰ç”¨æˆ·å°†æˆ‘ä»¬çš„ä»£ç cloneä¸‹æ¥ï¼Œè¿›è¡Œæ”¹åŠ¨æ—¶ï¼Œæ‰ä¼šå®‰è£…`devDependencies`ä¸­çš„ä¾èµ–ã€‚

å› ä¸º`@babel/core`ã€`@babel/cli`ã€`@babel/preset-env`åªæœ‰å¼€å‘è€…ç¼–è¯‘ä»£ç æ—¶æœ‰ç”¨ï¼Œä½¿ç”¨æ¨¡å—çš„äººç›´æ¥ä½¿ç”¨ç¼–è¯‘å¥½çš„ä»£ç ï¼Œæ‰€ä»¥å¹¶ä¸è¦ä½¿ç”¨è¿™ä¸‰ä¸ªæ¨¡å—ã€‚è€Œ`core-js`æ˜¯åœ¨è¿è¡Œæ—¶ä¸ºè€ç‰ˆæœ¬çš„æµè§ˆå™¨æä¾›ä¸æ”¯æŒçš„APIçš„å®ç°çš„ï¼Œæ‰€ä»¥ä½¿ç”¨æ¨¡å—çš„æ—¶å€™è¦åŠ è½½å®ƒã€‚å› æ­¤å‰è€…ç”¨`--save-dev`å®‰è£…ï¼Œåè€…ç”¨`--save`å®‰è£…ã€‚åŒæ ·ï¼Œå‰ä¸€èŠ‚æˆ‘ä»¬çš„`eslint`ä¹Ÿæ˜¯å¯¹å¼€å‘è€…æœ‰ç”¨ï¼Œä½¿ç”¨è€…å¹¶ä¸å…³å¿ƒï¼Œæ‰€ä»¥ä¹Ÿç”¨`--save-dev`å®‰è£…ã€‚

å®‰è£…å¥½äº†Babelåï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶`.babelrc`ï¼Œè¿™æ˜¯ä¸€ä¸ªJSONæ–‡ä»¶ï¼Œæˆ‘ä»¬é…ç½®å¦‚ä¸‹ï¼š

```
{
  "presets": [
    [
      "@babel/env",
      {
        "targets": "> 0.25%, not dead",
        "useBuiltIns": "usage"
      }
    ]
  ]
}
```

æˆ‘ä»¬å…ˆæ¥åˆ†æä¸€ä¸‹è¿™æ®µé…ç½®ï¼š

`@babel/env`è¡¨ç¤ºé¢„è®¾æ”¯æŒå½“å‰ç‰ˆæœ¬æ‰€èƒ½æ”¯æŒçš„æ‰€æœ‰JavaScriptçš„æ­£å¼æ ‡å‡†ã€‚

`"targets": "> 0.25%, not dead"`è¡¨ç¤ºç¼–è¯‘åçš„ç›®æ ‡ï¼Œè¿™é‡Œè®¾ç½®ä¸ºç›®å‰å¸‚åœºå æœ‰ç‡é«˜äº`0.25%`ä¸”ä¾ç„¶åœ¨ç»´æŠ¤ä¸­ï¼ˆnot deadï¼‰çš„æµè§ˆå™¨ã€‚è¿™ä¸ªé€‰é¡¹åŒ…æ‹¬äº†è¾ƒå¤šæ—©æœŸçš„æµè§ˆå™¨ï¼Œè¿™äº›æµè§ˆå™¨ä¸æ”¯æŒES6çš„è¯­æ³•ã€‚

`"useBuiltIns": "usage"`è¡¨ç¤ºBabelä¼šæ ¹æ®æˆ‘ä»¬å®é™…ç”¨åˆ°çš„APIä»¥åŠç¼–è¯‘ç›®æ ‡çš„æµè§ˆå™¨å…¼å®¹æ€§ï¼Œä»`core-js`ä¸­æŒ‰éœ€æ·»åŠ éœ€è¦çš„`polyfill`ã€‚

`"corejs": 3`è¡¨ç¤ºä½¿ç”¨`core-js`çš„`3.x`ç‰ˆæœ¬ï¼ˆé»˜è®¤æ˜¯ä½¿ç”¨2.xç‰ˆæœ¬ï¼‰ã€‚

ç„¶åï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®ä¸­åˆ›å»ºä¸€ä¸ªsrcç›®å½•ï¼Œä¿®æ”¹ä¸Šä¸€èŠ‚ä¸­çš„`index.js`æ–‡ä»¶ï¼Œå¹¶å°†å®ƒç§»è‡³`src`ç›®å½•ä¸‹ï¼Œå†…å®¹ä¸ºï¼š

```
class Foo {
  bar () {
    return 'bar';
  }
}

const f = new Foo();
console.log(f.bar());

```

ç„¶ååœ¨package.jsonæ–‡ä»¶ä¸­çš„`scripts`å­—æ®µä¸­æ·»åŠ `compile`å‘½ä»¤:

```
  "scripts": {
    // ..çœç•¥å…¶ä»–çš„è®¾ç½®...
    "compile": "babel src -d lib",
  },
```

`"compile": "babel src -d lib"`è¡¨ç¤ºåœ¨compileå‘½ä»¤ä¸­æ‰§è¡Œbabelï¼Œå°†srcç›®å½•çš„æ‰€æœ‰JSæ–‡ä»¶ç¼–è¯‘åï¼Œè¾“å‡ºåˆ°libç›®å½•ã€‚

è¿è¡Œcompileå‘½ä»¤ï¼š

```
npm run compile
```

è¿™æ—¶ï¼Œæˆ‘ä»¬ä¼šå‘ç°é¡¹ç›®ä¸‹å¤šäº†libç›®å½•ï¼Œå…¶ä¸­çš„index.jsæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š

```
"use strict";

function _classCallCheck(instance, Constructor) { ... }

function _defineProperties(target, props) { ...}

function _createClass(Constructor, protoProps, staticProps) { ... }

var Foo =
/*#__PURE__*/
function () {
  function Foo() {
    _classCallCheck(this, Foo);
  }

  _createClass(Foo, [{
    key: "bar",
    value: function bar() {
      return 'bar';
    }
  }]);

  return Foo;
}();

var f = new Foo();
console.log(f.bar());
```

ä¸Šé¢çš„è¿™æ®µä»£ç æ˜¯ç»è¿‡Babelç¼–è¯‘åçš„ä»£ç ã€‚å®ƒå°†ES6çš„ä»£ç ç¼–è¯‘æˆES5çš„ä»£ç ã€‚å› ä¸ºè€ç‰ˆæµè§ˆå™¨ä¸æ”¯æŒES6çš„Classè¯­æ³•ï¼Œæ‰€ä»¥Babelå°†å®ƒç¼–è¯‘æˆfunctionï¼Œè¿™æ ·å°±èƒ½è®©ES6çš„ä»£ç è¿è¡Œåœ¨è€ç‰ˆæœ¬çš„æµè§ˆå™¨ä¸Šäº†ã€‚

æˆ‘ä»¬å¯ä»¥ä¿®æ”¹`targets`ï¼Œè®©æˆ‘ä»¬çš„ä»£ç è¿è¡Œåœ¨æˆ‘ä»¬éœ€è¦çš„æµè§ˆå™¨ä¸Šï¼š

```
{
  "presets": [
    [
      "@babel/env",
      {
        "targets": {
          "chrome": 49
        },
        "useBuiltIns": "usage",
        "corejs": 3
      }
    ]
  ]
}
```

æˆ‘ä»¬å°†`targets`è®¾ä¸º`"chrome": 49`ï¼Œé‚£ä¹ˆå®ƒä¼šç¼–è¯‘æˆchrome 49æ‰€æ”¯æŒçš„ç›®æ ‡ä»£ç ã€‚å†æ¬¡æ‰§è¡Œ`npm run compile`ã€‚

è¿™æ¬¡å¾—åˆ°çš„ `lib/index.js` é•¿è¿™æ ·ï¼š

```
"use strict";

class Foo {
  bar() {
    return 'bar';
  }

}

const f = new Foo();
console.log(f.bar());
```

æˆ‘ä»¬çœ‹åˆ°ï¼Œé™¤äº†æ·»åŠ äº†ä¸€è¡Œ`"use strict"`ä¹‹å¤–ï¼ŒåŸºæœ¬ä¸Šä»£ç æ²¡æœ‰ä»»ä½•åŒºåˆ«ã€‚è¿™æ˜¯å› ä¸º`chrome 49`å·²ç»æ”¯æŒäº†classè¯­æ³•ã€‚

æˆ‘ä»¬ç»§ç»­ä¿®æ”¹`src/index.js`ï¼š

```
class Foo {
  bar () {
    return 'bar';
  }
}

const f = new Foo();
console.log(f.bar());

console.log(10 ** 3);

```

æˆ‘ä»¬å¢åŠ äº†`console.log(10 ** 3)`è¿™è¡Œä»£ç ï¼Œå†æ¬¡è¿è¡Œ`npm run compile`ï¼Œç„¶åæŸ¥çœ‹`lib/index.js`ï¼Œæˆ‘ä»¬çœ‹åˆ°ç°åœ¨çš„ä»£ç æ˜¯è¿™æ ·çš„ï¼š

```
"use strict";

class Foo {
  bar() {
    return 'bar';
  }

}

const f = new Foo();
console.log(f.bar());
console.log(Math.pow(10, 3));
```

å› ä¸º`chrome 49`ä¸æ”¯æŒä¹˜æ–¹æ“ä½œç¬¦`**`ï¼Œæ‰€ä»¥`10 ** 3`è¢«ç¼–è¯‘æˆäº†`Math.pow(10, 3)`ã€‚

é™¤äº†ä¸Šé¢æ‰€æåˆ°çš„è¿™äº›ï¼ŒBabelè¿˜æœ‰è®¸å¤šé…ç½®é¡¹å’Œç”¨æ³•ï¼Œæ›´è¯¦ç»†çš„ç”¨æ³•å¯ä»¥å‚è€ƒ[Babelå®˜ç½‘](https://link.juejin.cn/?target=https%3A%2F%2Fwww.babeljs.cn%2F "https://www.babeljs.cn/")ã€‚

æ€»ä¹‹ï¼Œæœ‰äº†Babelä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†JavaScriptä»£ç ç¼–è¯‘æˆä»»ä½•æˆ‘ä»¬éœ€è¦çš„ç›®æ ‡ç‰ˆæœ¬ï¼Œè¿™æ ·æˆ‘ä»¬åœ¨ä½¿ç”¨JavaScriptå†™ä»£ç çš„æ—¶å€™å°±å¯ä»¥æ”¾å¿ƒä½¿ç”¨æœ€æ–°çš„è¯­è¨€ç‰¹æ€§è€Œä¸ç”¨æ‹…å¿ƒæµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜äº†ã€‚

è§£å†³äº†å…¼å®¹é—®é¢˜ï¼Œæˆ‘ä»¬å†æ¥æ€è€ƒå¦ä¸€ä¸ªé—®é¢˜ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå¯¹äºè¾ƒå¤æ‚çš„Webåº”ç”¨ï¼Œæˆ‘ä»¬ä¼šé‡‡ç”¨æ¨¡å—åŒ–çš„å¼€å‘æ–¹å¼ï¼Œæ— è®ºæ˜¯æ—©æœŸNode.jsçš„CommoneJSè§„èŒƒè¿˜æ˜¯ECMAScriptæœ€æ–°çš„ES Moduleè§„èŒƒéƒ½æä¾›äº†è§„èŒƒçš„æ¨¡å—åŠ è½½æœºåˆ¶ã€‚ä½†æ˜¯ï¼Œæ—©æœŸçš„æµè§ˆå™¨å´ä¸æ”¯æŒæ¨¡å—çš„åŠ è½½ï¼Œè€Œä¸”ç°åœ¨å¤§éƒ¨åˆ†ç½‘ç«™ä¾ç„¶æ˜¯HTTP1.1ï¼Œé™¤äº†æ¨¡å—åŠ è½½å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦è€ƒè™‘å‡å°‘HTTPè¯·æ±‚çš„æ•°é‡ã€‚è¿™å°±è¦æ±‚æˆ‘ä»¬çš„ä»£ç åœ¨å¼€å‘åˆ°æœ€ç»ˆä¸Šçº¿çš„ç¯èŠ‚è¿˜éœ€è¦è§£å†³ä¸¤ä¸ªé—®é¢˜ï¼š

-   ä¸€ä¸ªæ˜¯æ¨¡å—åŠ è½½å’Œç®¡ç†çš„é—®é¢˜ï¼›
-   å¦ä¸€ä¸ªæ˜¯å°†å¤šä¸ªæ¨¡å—æ–‡ä»¶æ‰“åŒ…åˆå¹¶æˆå•ä¸€æ–‡ä»¶å‘å¸ƒä¸Šçº¿çš„é—®é¢˜ã€‚

é‚£ä¹ˆï¼Œä¸Šè¿°ä¸¤ä¸ªé—®é¢˜å¯ä»¥é€šè¿‡ä»€ä¹ˆå·¥å…·æ¥è§£å†³å‘¢ï¼Ÿ

ç¬¬ä¸‰ä¸ªæ•…äº‹ï¼šä½¿ç”¨Webpackæ‰“åŒ…å’Œå‘å¸ƒ
--------------------

ä¸Šä¸¤ä¸ªæ•…äº‹ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†è§„èŒƒåŒ–çš„å·¥å…·è§£å†³æ–¹æ¡ˆï¼Œè¿™ä¸ªæ•…äº‹ï¼Œæˆ‘ä»¬å°±æ¥çœ‹çœ‹è‡ªåŠ¨åŒ–æ‰“åŒ…å·¥å…·ã€‚

åœ¨è¾ƒå¤§è§„æ¨¡çš„Webåº”ç”¨åœºæ™¯ä¸­ï¼ŒJavaScriptä»£ç ä¼šä½¿ç”¨æ¯”è¾ƒå¤šï¼Œé€»è¾‘ä¹Ÿæ¯”è¾ƒå¤æ‚ï¼Œè€Œä¸”è¦å¤šäººåä½œå¼€å‘ï¼Œåˆ†æ¨¡å—æ˜¯ä¸€ä¸ªå¼ºéœ€æ±‚ã€‚

æœ€æ–°çš„æµè§ˆå™¨æ˜¯æ”¯æŒ`ES Module`è§„èŒƒçš„ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æµè§ˆå™¨æä¾›çš„åŸç”Ÿæ¨¡å—æœºåˆ¶ï¼Œå®ç°æ¨¡å—çš„åŠ è½½ï¼š

```
<script type="module">
  import {Foo} from '/foo.js';
  const f = new Foo();
  console.log(f.bar());
</script>
```

æˆ‘ä»¬æŠŠ`script`æ ‡ç­¾çš„`type`è®¾ä¸º`module`ï¼Œå‘Šè¯‰æµè§ˆå™¨è¿™æ˜¯ä¸€æ®µæ”¯æŒ`ES Module`çš„è„šæœ¬ã€‚è¿™æ ·ï¼Œåœ¨è¿™æ®µè„šæœ¬ä¸­ï¼Œæˆ‘ä»¬æ‰å¯ä»¥ä½¿ç”¨`import`å»åŠ è½½å…¶ä»–æ¨¡å—ã€‚è¿™æ¡è¯­å¥ï¼ˆ`import {Foo} from '/foo.js'`ï¼‰è¡¨ç¤ºæµè§ˆå™¨å°±ä¼šæ ¹æ®ç½‘ç«™æ ¹ç›®å½•è‡ªåŠ¨åŠ è½½å¯¹åº”çš„`/foo.js`è„šæœ¬æ–‡ä»¶ã€‚

ä½†æ˜¯ï¼Œç¨æ—©ä¸€äº›çš„æµè§ˆå™¨ä¸æ”¯æŒ`ES Module`ï¼Œè¿™æ—¶å€™å°±éœ€è¦æˆ‘ä»¬çš„æ‰“åŒ…å·¥å…·äº†ã€‚æ‰“åŒ…å·¥å…·å®ƒè§£å†³ä¸¤ä¸ªé—®é¢˜ï¼š

1.  æ ¹æ®importå…³é”®å­—ï¼Œå°†é¡¹ç›®ä¸­ä¸Šæ‰€æœ‰ç”¨åˆ°çš„æ¨¡å—éƒ½åˆå¹¶åˆ°ä¸€ä¸ªJSæ–‡ä»¶ä¸­ã€‚é™¤äº†JSæ–‡ä»¶ï¼Œå®ƒè¿˜èƒ½æ‰“åŒ…Webé¡¹ç›®ä¸­çš„å…¶å®ƒçš„é™æ€èµ„æºï¼Œæ¯”å¦‚ï¼šhtmlã€cssã€å›¾ç‰‡ç­‰ã€‚
2.  å‡å°‘httpè¯·æ±‚ï¼Œæä¸ŠåŠ è½½é€Ÿåº¦

ç°åœ¨æ¯”è¾ƒæµè¡Œçš„æ‰“åŒ…å·¥å…·æœ‰Webpackã€Rollupã€Gulpç­‰ç­‰ï¼Œä¸€èˆ¬é€‰æ‹©ä¸€ç§å°±å¯ä»¥ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬é€‰æ‹©Webpackã€‚

åŒæ ·ï¼Œæˆ‘ä»¬éœ€è¦åœ¨Nodeç¯å¢ƒå®‰è£…Webpackæ¨¡å—ï¼š

```
npm install --save-dev webpack webpack-cli webpack-dev-server babel-loader
```

åœ¨è¿™é‡Œæˆ‘ä»¬å®‰è£…äº†å››ä¸ªæ¨¡å—ï¼š

-   `webpack`ï¼š`webpack`æ ¸å¿ƒæ¨¡å—
-   `webpack-cli`ï¼šå‘½ä»¤è¡Œ
-   `webpack-dev-server`ï¼šå¼€å‘æœåŠ¡å™¨
-   `babel-loader`ï¼š`webpack`é›†æˆ`babel`ç¼–è¯‘çš„åŠ è½½å™¨ã€‚

æœ‰äº†webpackä¹‹åï¼Œæˆ‘ä»¬è¦æ·»åŠ webpackçš„é…ç½®æ–‡ä»¶ï¼Œå®ƒæ˜¯ä¸€ä¸ªjsæ–‡ä»¶ã€‚æˆ‘ä»¬åœ¨é¡¹ç›®ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª`webpack.config.js`æ–‡ä»¶ã€‚å®ƒçš„å†…å®¹å¦‚ä¸‹ï¼š

```
const path = require('path');

module.exports = {
  entry: './src/index.js',
  output: {
    path: path.resolve(__dirname, 'dist'),
    filename: 'app.js'
  }
};
```

`entry`å­—æ®µæŒ‡å®šäº†å…¥å£æ–‡ä»¶ï¼Œè¿™é‡Œæ˜¯`./src/index.js`ï¼Œ`output`å­—æ®µæŒ‡å®šæ‰“åŒ…åçš„æ–‡ä»¶çš„è¾“å‡ºç›®çš„åœ°ï¼Œè¿™é‡Œæ˜¯è¾“å‡ºåˆ°å½“å‰é¡¹ç›®çš„`dist`ç›®å½•ä¸‹çš„`app.js`æ–‡ä»¶ã€‚

æˆ‘ä»¬åœ¨`package.json`æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªå‘½ä»¤ï¼š

```
"scripts": {
  // ...çœç•¥å…¶ä»–é…ç½®...
  "build": "webpack"
},
```

æˆ‘ä»¬æ·»åŠ äº†buildå‘½ä»¤ï¼Œè¿è¡Œå®ƒï¼š

```
npm run build
```

è¿™æ ·æˆ‘ä»¬å¾—åˆ°ä¸€ä¸ª`dist`ç›®å½•å’Œä¸€ä¸ªæ‰“åŒ…åçš„`app.js`æ–‡ä»¶ã€‚

æ‰“åŒ…çš„è¿‡ç¨‹ä¸­ï¼Œæ§åˆ¶å°ä¸Šä¼šæœ‰ä¸€æ®µè­¦å‘Šä¿¡æ¯ï¼š

```
ARNING in configuration
The 'mode' option has not been set, webpack will fallback to 'production' for this value. Set 'mode' option to 'development' or 'production' to enable defaults for each environment.
You can also set it to 'none' to disable any default behavior. Learn more: https://webpack.js.org/configuration/mode/
```

è¿™æ˜¯å› ä¸ºæˆ‘ä»¬æ²¡æœ‰é…ç½®webpackçš„æ‰“åŒ…æ¨¡å¼ã€‚webpackæ”¯æŒ`development`ã€`production`å’Œ`none`ä¸‰ç§æ¨¡å¼ã€‚ç°åœ¨æˆ‘ä»¬ä¸æŒ‡å®šæ¨¡å¼ï¼Œæ–‡ä»¶é»˜è®¤ä¼šè¢«ä»¥`production`æ¨¡å¼æ‰“åŒ…ã€‚åœ¨productionæ¨¡å¼ä¸‹ï¼ŒJSè„šæœ¬ä¼šè¢«å‹ç¼©æˆä¸€è¡Œä»¥å‡å°ä½“ç§¯ï¼Œä½ æ‰“å¼€`dist/app.js`æ–‡ä»¶å°±ä¼šçœ‹åˆ°è„šæœ¬è¢«å‹ç¼©æˆäº†ä¸€è¡Œã€‚

### env.mode

ä¸ºäº†è®©Webpackèƒ½å¤Ÿä»¥ä¸åŒçš„æ¨¡å¼è¿›è¡Œæ‰“åŒ…ï¼Œæˆ‘ä»¬éœ€è¦åœ¨`webpack.config.js`æ–‡ä»¶ä¸­å¢åŠ `mode`è®¾ç½®ï¼š

```
const path = require('path');

module.exports = function (env = {}) {
  return {
    mode: env.mode,
    entry: './src/index.js',
    output: {
      path: path.resolve(__dirname, 'dist'),
      filename: 'app.js'
    }
  };
};
```

ç„¶åä¿®æ”¹`package.json`ä¸­çš„è„šæœ¬å‘½ä»¤ï¼š

```
"scripts": {
  // ...çœç•¥å…¶ä»–é…ç½®...
  "build": "webpack --env.mode=none",
  "build:dev": "webpack --env.mode=development",
  "build:prod": "webpack --env.mode=production",
},
```

æˆ‘ä»¬ç”¨ä¸‰ä¸ªå‘½ä»¤`build`ã€`build:dev`å’Œ`build:prod`è¡¨ç¤ºä»¥ä¸‰ç§ä¸åŒçš„æ¨¡å¼æ‰“åŒ…æˆ‘ä»¬çš„JSä»£ç ã€‚

æˆ‘ä»¬ç°åœ¨å†è¿è¡Œä¸€ä¸‹`npm run build`è¿™æ—¶å€™å°†ä»¥`env.mode=none`çš„æ–¹å¼è¿›è¡Œæ‰“åŒ…ï¼Œä»£ç å°†ä¸å†è¢«å‹ç¼©æˆä¸€è¡Œï¼Œæˆ‘ä»¬çœ‹åˆ°æ‰“åŒ…åçš„ä»£ç æ˜¯è¿™æ ·çš„ï¼š

```
/******/ (function(modules) { // webpackBootstrap
/******/ // The module cache
/******/ var installedModules = {};
/******/
...
/******/
/******/ // Load entry module and return exports
/******/ return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports) {

class Foo {
  bar () {
    return 'bar';
  }
}

const f = new Foo();
console.log(f.bar());

console.log(10 ** 3);


/***/ })
/******/ ]);
```

å‰é¢æœ‰ä¸€å †è¢«çœç•¥æ‰çš„ä»£ç æ˜¯Webpackæ‰“åŒ…çš„æ—¶å€™æ·»åŠ çš„ï¼Œç”¨æ¥æ­£ç¡®è½½å…¥æ¨¡å—çš„ä»£ç ã€‚åé¢ä¸€éƒ¨åˆ†æ˜¯æˆ‘ä»¬åŸå§‹ä»£ç ï¼Œä¹Ÿå°±æ˜¯`src/index.js`ä¸­çš„ä»£ç ã€‚ä¸è¿‡æˆ‘ä»¬çœ‹åˆ°ï¼Œè¿™éƒ¨åˆ†ä»£ç ä¾ç„¶æ˜¯å’Œæˆ‘ä»¬åŸæ¥å†™çš„ä¸€æ ·ï¼Œå¦‚æœæˆ‘ä»¬è¦å°†å®ƒç¼–è¯‘æˆå…¼å®¹æ—§ç‰ˆæœ¬ï¼ŒåŒæ—¶æ‰“åŒ…ï¼Œå°±éœ€è¦`Babel`çš„é…åˆã€‚æˆ‘ä»¬å‰é¢å®‰è£…çš„`babel-loader`å°±æ˜¯ç”¨æ¥åšè¿™ä¸ªäº‹æƒ…çš„ã€‚

æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹`webpack.config.js`ï¼Œæ·»åŠ ä¸€ä¸‹loaderï¼š

```
const path = require('path');

module.exports = function (env = {}) {
  return {
    mode: env.mode,
    entry: './src/index.js',
    output: {
      path: path.resolve(__dirname, 'dist'),
      filename: 'app.js'
    },
    module: {
      rules: [
        {
          test: /\.js$/,
          exclude: /node_modules/,
          use: {
            loader: 'babel-loader'
          }
        }
      ]
    }
  };
};
```

æˆ‘ä»¬ç»™webpackå¢åŠ æ¨¡å—ï¼ˆmoduleï¼‰é…ç½®ï¼Œè§„åˆ™æ˜¯åŒ¹é…æ‰€æœ‰çš„ js æ–‡ä»¶ï¼Œä½†æ˜¯ä¸åŒ…æ‹¬`node_modules`ç›®å½•ä¸­çš„æ–‡ä»¶ã€‚å› ä¸ºæˆ‘ä»¬å®‰è£…çš„ç¬¬ä¸‰æ–¹æ¨¡å—é€šå¸¸æ˜¯ç¼–è¯‘è¿‡çš„ï¼Œ`use`å­—æ®µè¡¨ç¤ºè¦ä½¿ç”¨çš„`loader`ï¼Œè¿™é‡Œæ˜¯`babel-loader`ã€‚

ä¸ºäº†åŒºåˆ†å¾—æ›´æ˜æ˜¾ï¼Œæˆ‘ä»¬å°†`.babelrc`çš„é…ç½®æ”¹å›ä»¥ä¸‹é…ç½®ï¼š

```
{
  "presets": [
    [
      "@babel/env",
      {
        "targets": "> 0.25%, not dead",
        "useBuiltIns": "usage",
        "corejs": 3
      }
    ]
  ]
}
```

è¿™æ ·ï¼Œå†æ¬¡è¿è¡Œ`npm run build`ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°ï¼Œæ‰“åŒ…åçš„ä»£ç å°†å˜æˆï¼š

```
... // çœç•¥å‰é¢ Webpack æ·»åŠ çš„ä»£ç 
/***/ (function(module, exports) {

function _classCallCheck(instance, Constructor) { ... }

function _defineProperties(target, props) { ... }

function _createClass(Constructor, protoProps, staticProps) { ... }

var Foo =
/*#__PURE__*/
function () {
  function Foo() {
    _classCallCheck(this, Foo);
  }

  _createClass(Foo, [{
    key: "bar",
    value: function bar() {
      return 'bar';
    }
  }]);

  return Foo;
}();

var f = new Foo();
console.log(f.bar());
console.log(Math.pow(10, 3));

/***/ })
/******/ ]);
```

è¿™æ ·ï¼Œæˆ‘ä»¬çœ‹åˆ°`src/index.js`è¢«ç¼–è¯‘æˆES5çš„ä»£ç äº†ã€‚

ç°åœ¨æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹`src`ä¸‹çš„æ–‡ä»¶ï¼ŒæŠŠå®ƒåˆ†æˆä¸¤ä¸ªæ–‡ä»¶ï¼Œæ–°å»ºä¸€ä¸ª`foo.js`ï¼š

```
export default class Foo {
  bar () {
    return 'bar';
  }
};

```

ç„¶åæŠŠ`index.js`æ”¹æˆï¼š

```
import Foo from './foo';

const f = new Foo();
console.log(f.bar());

console.log(10 ** 3);

```

æˆ‘ä»¬å…ˆè¿è¡Œä¸€ä¸‹ä¹‹å‰çš„Babelç¼–è¯‘å‘½ä»¤ï¼š`npm run compile`ã€‚

æˆ‘ä»¬ä¼šçœ‹åˆ°ç°åœ¨çš„libç›®å½•ä¸‹é¢ä¹Ÿæ˜¯ä¸¤ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ª`foo.js`å’Œä¸€ä¸ª`index.js`ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒBabelä¼šå°†srcç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ä¸€ä¸€å¯¹åº”ç¼–è¯‘åˆ°libä¸‹ï¼Œä½†æ˜¯å®ƒå¹¶ä¸ä¼šåˆå¹¶æ–‡ä»¶ã€‚

è€Œæˆ‘ä»¬å†è¿è¡Œ`npm run build`ã€‚

ä¼šå‘ç°ï¼Œç”Ÿæˆçš„`dist/app.js`æ–‡ä»¶å†…å®¹å’Œä¹‹å‰ä¸€ä¸ªæ–‡ä»¶æ—¶çš„ä¸€æ ·ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œwebpackå°†ä¸¤ä¸ªæ–‡ä»¶æ‰“åŒ…åœ¨äº†ä¸€èµ·ã€‚

æœ€åï¼Œè¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬åˆšæ‰è¿˜å®‰è£…äº†ä¸€ä¸ª`webpack-dev-server`ï¼Œè¿™ä¸ªè„šæœ¬åˆæ˜¯åšä»€ä¹ˆç”¨çš„å‘¢ï¼Ÿ

å› ä¸ºæˆ‘ä»¬ç°åœ¨æœ‰äº†webpackæ‰“åŒ…å·¥å…·ï¼Œæ‰€ä»¥æˆ‘ä»¬å·²ç»å¯ä»¥ç”Ÿæˆ`app.js`è¿™ä¸ªæ–‡ä»¶ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥åˆ›å»ºåº”ç”¨æ¥ä½¿ç”¨`app.js`ï¼Œæˆ–è€…åˆ›å»ºä¾‹å­æ¥æµ‹è¯•å®ƒã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬åœ¨å¼€å‘ä¸­æ¯æ¬¡ä¸€ä¿®æ”¹åŸå§‹çš„srcç›®å½•ä¸­çš„æ–‡ä»¶ï¼Œéƒ½è¦æ‰“åŒ…ä¸€æ¬¡å»æ›´æ–°`app.js`ï¼Œé‚£æ ·ä¼šéå¸¸éº»çƒ¦ï¼Œå¼€å‘å’Œæµ‹è¯•èµ·æ¥å¾ˆä¸æ–¹ä¾¿ã€‚`webpack-dev-server`æä¾›äº†ä¸€ä¸ªå¯ä»¥çƒ­æ›´æ–°ä¿®æ”¹åŸå§‹æ–‡ä»¶ï¼Œç«‹å³æ›´æ–°`app.js`çš„æœºåˆ¶ï¼Œå¹¶ä¸”å®ƒè‡ªèº«æ˜¯ä¸€ä¸ªwebæœåŠ¡å™¨ï¼Œæ–¹ä¾¿æˆ‘ä»¬å¼€å‘è°ƒè¯•ã€‚

æˆ‘ä»¬ç°åœ¨é…ç½®ä¸€ä¸‹`webpack-dev-server`ï¼Œä¿®æ”¹`webpack.config.js`æ–‡ä»¶ï¼š

```
const path = require('path');

module.exports = function (env = {}) {
  return {
    // ...çœç•¥å…¶å®ƒè®¾ç½®...
    devServer: {
      contentBase: path.join(__dirname, env.server || '.'),
      port: 9090,
      hot: true
    }
  };
};
```

æˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ª`devServer`é…ç½®ï¼Œ`contentBase`æ˜¯`http server`è¿è¡Œçš„ç›®å½•ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡`env.server`æ¥æŒ‡å®šï¼Œ`port`æ˜¯è¿è¡Œç«¯å£ï¼Œæˆ‘ä»¬å°†å®ƒè®¾ä¸º9090ï¼Œ`hot`è®¾ä¸º`true`ï¼Œé‚£ä¹ˆä¸€æ—¦srcä¸‹çš„å†…å®¹è¢«ä¿®æ”¹ï¼Œ`app.js`å°†è‡ªåŠ¨æ›´æ–°ã€‚

æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨é¡¹ç›®ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªexampleå­ç›®å½•ï¼Œæ·»åŠ index.htmlæ–‡ä»¶ï¼š

```
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script src="app.js"></script>
</body>
</html>
```

æˆ‘ä»¬å†ä¿®æ”¹package.jsonæ–‡ä»¶ï¼Œæ·»åŠ ä¸€ä¸ªå‘½ä»¤ï¼š

```
"scripts": {
  // ...çœç•¥å…¶å®ƒé…ç½®...
  "dev": "webpack-dev-server --env.server=example",
},
```

æˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ª`dev`å‘½ä»¤ï¼Œæ‰§è¡Œ`webpack-dev-server --env.server=example`ï¼Œç°åœ¨æˆ‘ä»¬è¿è¡Œå®ƒï¼š

```
npm run dev
```

è¿™æ ·æˆ‘ä»¬å°±å¯åŠ¨äº†webpack-dev-serverçš„webæœåŠ¡å™¨ï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®`localhost:9090`å°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„é¡µé¢ã€‚æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œæ§åˆ¶å°ä¸Šç°åœ¨è¾“å‡ºçš„ä¿¡æ¯æ˜¯`bar`å’Œ`1000`ã€‚

å›åˆ°`src/index.js`æ–‡ä»¶ï¼Œæˆ‘ä»¬æŠŠ`console.log(10 ** 3);`ä¿®æ”¹ä¸º`console.log(20 ** 3);`ï¼Œå†åˆ‡æ¢å›æµè§ˆå™¨çª—å£ï¼Œæˆ‘ä»¬çœ‹åˆ°æ§åˆ¶å°çš„è¾“å‡ºä¿¡æ¯å˜æˆäº†`bar`å’Œ`2000`ã€‚è¿™æ˜¯å› ä¸º`webpack`è‡ªåŠ¨æ›´æ–°äº†`app.js`æ–‡ä»¶ã€‚

è‡³æ­¤ï¼Œwebpackæ‰“åŒ…çš„ç®€å•é…ç½®å°±åŸºæœ¬ä¸Šå®Œæˆäº†ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬å·²ç»åˆ›å»ºäº†ä¸€ä¸ªå®Œæ•´çš„å¼€å‘ç¯å¢ƒï¼Œå¯ä»¥å¼€å§‹æˆ‘ä»¬çš„é¡¹ç›®å¼€å‘äº†ã€‚

`webpack`è¿˜æœ‰è®¸å¤šé«˜çº§çš„åŠŸèƒ½ï¼Œä»¥åŠä¸åŒçš„loaderï¼Œä¸ä»…ä»…èƒ½å¤Ÿæ‰“åŒ…JSæ–‡ä»¶ï¼Œè¿˜å¯ä»¥æ‰“åŒ…CSSã€é™æ€èµ„æºå’ŒHTMLæ–‡ä»¶ï¼Œåœ¨è®¸å¤šwebé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä¼šé…ç½®`webpack`å°†å„ç§æ–‡ä»¶æ‰“åŒ…åˆ°ä¸€èµ·ï¼Œæœ€ç»ˆæ•´ä½“å‘å¸ƒï¼Œè¿™æ ·çº¿ä¸Šä»£ç çš„ä½“ç§¯æœ€å°ï¼Œè€Œä¸”HTTPè¯·æ±‚æ•°ä¹Ÿå¤§å¤§å‡å°‘ã€‚

å…³äº`webpack`çš„æ›´å¤šåŠŸèƒ½å’Œç¤ºä¾‹ï¼Œå¯ä»¥å‚è€ƒ[webpackå®˜ç½‘](https://link.juejin.cn/?target=https%3A%2F%2Fwebpack.js.org%2F "https://webpack.js.org/")ã€‚

### å°ç»“

æœ€åæ€»ç»“ä¸€ä¸‹ï¼Œåœ¨ä¸€ä¸ªé€šç”¨çš„é¡¹ç›®å¼€å‘ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ESLintæ¥è¿›è¡Œä»£ç æç¤ºï¼Œä»è€Œç»Ÿä¸€ä»£ç é£æ ¼ï¼Œæå‡é¡¹ç›®çš„ä»£ç è´¨é‡ï¼›ä½¿ç”¨Babelæ¥ç¼–è¯‘ä»£ç ä»¥å…¼å®¹æ—§ç‰ˆæœ¬ï¼Œä»è€Œè®©æˆ‘ä»¬èƒ½å¤Ÿä½¿ç”¨æœ€æ–°çš„è¯­è¨€ç‰¹æ€§æ¥å¼€å‘é¡¹ç›®ï¼Œä»¥æé«˜å¼€å‘æ•ˆç‡ï¼Œæå‡é¡¹ç›®çš„å¯ç»´æŠ¤æ€§ï¼›ä½¿ç”¨Webpackæ¥å®Œæˆä»£ç çš„æ‰“åŒ…ï¼Œè§£å†³æµè§ˆå™¨ä¸èƒ½æ”¯æŒCommonJSå’ŒES Moduleæ¨¡å—åŒ–è§„èŒƒçš„é—®é¢˜ï¼Œå°†æˆ‘ä»¬çš„é¡¹ç›®ä»£ç ä»å¼€å‘ç¯å¢ƒè½¬å˜ä¸ºå¯å‘å¸ƒåˆ°çº¿ä¸Šçš„æœ€ç»ˆä»£ç ã€‚

ESLintåˆ°Babelåˆ°Webpackï¼Œè¿™æ˜¯æœ€åŸºç¡€çš„å·¥ç¨‹åŒ–å·¥å…·é›†ï¼Œé™¤æ­¤ä»¥å¤–ï¼Œè¿˜æœ‰å…¶ä»–çš„å·¥å…·ä»¥è§£å†³å…¶ä»–é—®é¢˜ï¼Œæ¯”å¦‚å•å…ƒæµ‹è¯•çš„å·¥å…·ã€æŒç»­é›†æˆï¼ˆCI/CDï¼‰çš„å·¥å…·ç­‰ç­‰ï¼Œè¿™äº›å·¥å…·æœ€ç»ˆçš„ç›®çš„éƒ½æ˜¯è®©æˆ‘ä»¬çš„å¼€å‘å˜å¾—æ›´é«˜æ•ˆå’Œå¯é ï¼Œé¡¹ç›®çš„ä»£ç è´¨é‡å’Œå¯ç»´æŠ¤æ€§å¾—åˆ°æå‡ï¼Œè€Œè¿™æ˜¯å®é™…é¡¹ç›®å¼€å‘å’Œå›¢é˜Ÿåä½œä¸å¯æˆ–ç¼ºçš„ã€‚å› æ­¤å‰ç«¯å·¥ç¨‹åŒ–æ–¹æ³•å’Œç›¸åº”çš„å·¥å…·é›†ï¼Œå¯¹äºä¼˜ç§€çš„å‰ç«¯å·¥ç¨‹å¸ˆï¼Œä¹Ÿæ˜¯å¿…ä¿®è¯¾ï¼Œå¿…é¡»è¦å¥½å¥½æŒæ¡ã€‚

æœ¬è¯¾ç¨‹é™äºç¯‡å¹…ï¼Œæˆ‘ä»¬åªæ˜¯æœ€ç²—æµ…åœ°ä»‹ç»äº†è¿™äº›å·¥å…·çš„ä½¿ç”¨ï¼ŒçœŸæ­£å‘æŒ¥ä¸åˆ°è¿™äº›å·¥å…·èƒ½åŠ›çš„ååˆ†ä¹‹ä¸€ã€‚å¦‚æœä½ æœ‰å…´è¶£ï¼Œå¯ä»¥åˆ°å„è‡ªçš„å®˜ç½‘è‡ªè¡Œå­¦ä¹ ã€‚