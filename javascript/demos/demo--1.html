<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Demo 1</title>
    <script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
</head>
<body>
<h1>demo page</h1>
</body>
<script>
    function xmlToJson(xml) {
        // Create the return object
        var obj = {};
        if (xml.nodeType == 1) { // element
            // do attributes
            if (xml.attributes.length > 0) {
                obj["@attributes"] = {};
                for (var j = 0; j < xml.attributes.length; j++) {
                    var attribute = xml.attributes.item(j);
                    obj["@attributes"][attribute.nodeName] = attribute.nodeValue;
                }
            }
        } else if (xml.nodeType == 3) { // text
            obj = xml.nodeValue;
        }
        // do children
        if (xml.hasChildNodes()) {
            for(var i = 0; i < xml.childNodes.length; i++) {
                var item = xml.childNodes.item(i);
                var nodeName = item.nodeName;
                if (typeof(obj[nodeName]) == "undefined") {
                    obj[nodeName] = xmlToJson(item);
                } else {
                    if (typeof(obj[nodeName].length) == "undefined") {
                        var old = obj[nodeName];
                        obj[nodeName] = [];
                        obj[nodeName].push(old);
                    }
                    obj[nodeName].push(xmlToJson(item));
                }
            }
        }
        return obj;
    };

    //实例测试
    var xmlString = '<?xml version="1.0" encoding="UTF-8"?><bpmn2:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" id="sample-diagram" targetNamespace="http://bpmn.io/schema/bpmn" xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd"><bpmn2:process id="Process_1609382793876" name="测试流程1" isExecutable="true" camunda:versionTag="12.0.0.1"><bpmn2:startEvent id="Event_0hyj7fo"><bpmn2:outgoing>Flow_1724b07</bpmn2:outgoing></bpmn2:startEvent><bpmn2:task id="Activity_0h257t0" name="1"><bpmn2:incoming>Flow_1724b07</bpmn2:incoming><bpmn2:outgoing>Flow_15z3fyw</bpmn2:outgoing></bpmn2:task><bpmn2:sequenceFlow id="Flow_1724b07" sourceRef="Event_0hyj7fo" targetRef="Activity_0h257t0" /><bpmn2:task id="Activity_0fzd7q0" name="2"><bpmn2:incoming>Flow_15z3fyw</bpmn2:incoming><bpmn2:outgoing>Flow_1hkegmq</bpmn2:outgoing><bpmn2:outgoing>Flow_15n0kka</bpmn2:outgoing></bpmn2:task><bpmn2:sequenceFlow id="Flow_15z3fyw" name="line1" sourceRef="Activity_0h257t0" targetRef="Activity_0fzd7q0" /><bpmn2:task id="Activity_0wzglj3" name="3"><bpmn2:incoming>Flow_1hkegmq</bpmn2:incoming><bpmn2:outgoing>Flow_183len6</bpmn2:outgoing></bpmn2:task><bpmn2:sequenceFlow id="Flow_1hkegmq" name="line2" sourceRef="Activity_0fzd7q0" targetRef="Activity_0wzglj3"><bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression">${ line2 == "pass" }</bpmn2:conditionExpression></bpmn2:sequenceFlow><bpmn2:endEvent id="Event_1d0b0pw"><bpmn2:incoming>Flow_183len6</bpmn2:incoming><bpmn2:incoming>Flow_0x2zdsn</bpmn2:incoming></bpmn2:endEvent><bpmn2:sequenceFlow id="Flow_183len6" sourceRef="Activity_0wzglj3" targetRef="Event_1d0b0pw" /><bpmn2:task id="Activity_1r24ped" name="4"><bpmn2:incoming>Flow_15n0kka</bpmn2:incoming><bpmn2:outgoing>Flow_0x2zdsn</bpmn2:outgoing></bpmn2:task><bpmn2:sequenceFlow id="Flow_15n0kka" name="line3" sourceRef="Activity_0fzd7q0" targetRef="Activity_1r24ped"><bpmn2:documentation>docx 1</bpmn2:documentation><bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" language="JavaScript">test js</bpmn2:conditionExpression></bpmn2:sequenceFlow><bpmn2:sequenceFlow id="Flow_0x2zdsn" sourceRef="Activity_1r24ped" targetRef="Event_1d0b0pw" /></bpmn2:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1609382793876"><bpmndi:BPMNEdge id="Flow_1724b07_di" bpmnElement="Flow_1724b07"><di:waypoint x="208" y="250" /><di:waypoint x="260" y="250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_15z3fyw_di" bpmnElement="Flow_15z3fyw"><di:waypoint x="360" y="250" /><di:waypoint x="420" y="250" /><bpmndi:BPMNLabel><dc:Bounds x="378" y="232" width="24" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1hkegmq_di" bpmnElement="Flow_1hkegmq"><di:waypoint x="520" y="250" /><di:waypoint x="580" y="250" /><bpmndi:BPMNLabel><dc:Bounds x="538" y="232" width="24" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_183len6_di" bpmnElement="Flow_183len6"><di:waypoint x="680" y="250" /><di:waypoint x="742" y="250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_15n0kka_di" bpmnElement="Flow_15n0kka"><di:waypoint x="470" y="290" /><di:waypoint x="470" y="360" /><di:waypoint x="580" y="360" /><bpmndi:BPMNLabel><dc:Bounds x="473" y="322" width="24" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0x2zdsn_di" bpmnElement="Flow_0x2zdsn"><di:waypoint x="680" y="360" /><di:waypoint x="760" y="360" /><di:waypoint x="760" y="268" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="Event_0hyj7fo_di" bpmnElement="Event_0hyj7fo"><dc:Bounds x="172" y="232" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0h257t0_di" bpmnElement="Activity_0h257t0"><dc:Bounds x="260" y="210" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0fzd7q0_di" bpmnElement="Activity_0fzd7q0"><dc:Bounds x="420" y="210" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0wzglj3_di" bpmnElement="Activity_0wzglj3"><dc:Bounds x="580" y="210" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1d0b0pw_di" bpmnElement="Event_1d0b0pw"><dc:Bounds x="742" y="232" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1r24ped_di" bpmnElement="Activity_1r24ped"><dc:Bounds x="580" y="320" width="100" height="80" /></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn2:definitions>'

    console.log(xmlToJson(xmlString))
</script>
</html>
